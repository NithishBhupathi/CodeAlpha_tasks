<!DOCTYPE html>
<html>
<head>
    <title>Chatbot</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="chat-container">
        <h2>Rule-Based Chatbot</h2>

        <div id="chat-box" class="chat-box"></div>

        <div class="input-area">
            <input type="text" id="user-input" placeholder="Type a message...">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

<script>
async function sendMessage() {
    let input = document.getElementById("user-input");
    let message = input.value.trim();

    if (message === "") return;
    input.value = "";

    let response = await fetch("/get_message", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({message: message})
    });

    let data = await response.json();

    updateChat(data.history);
}

function updateChat(history) {
    let box = document.getElementById("chat-box");
    box.innerHTML = "";

    history.forEach(item => {
        box.innerHTML += `<div class="user">You: ${item.user}</div>`;
        box.innerHTML += `<div class="bot">Bot: ${item.bot}</div>`;
    });

    box.scrollTop = box.scrollHeight;
}
</script>

</body>
</html>
